---
layout:     post
title:      ABM SIGCOMM 2022
subtitle:   Active Buffer Management in Datacenters
date:       2022-08-29
author:     Yiran
header-img: img/post-bg-cloud.jpeg
catalog: true
tags:
    - Transport in Datacenter
---

与数据中心交换机缓存管理相关两个重要的策略：**Buffer Management** 和 **AQM** 应如何协作？

### Motivation

<img width="500" height="400" src="/img/post-abm-1.png"/>

Switch Model: shared buffer, output-queued, 有优先级队列  
**Buffer Management**:决定交换机决定每个队列的buffer最大多大，即空间上的buffer分配, 例如Complete Sharing(完全共享，无上限)， Dynamic Thresholds(DT, 动态根据剩余buffer大小调整)等  
**AQM**: 当每个数据包到达时，决定是入队、标记(例如RED标ECN)、丢弃、还是抛弃payload(trimmed),即运行时的队列管理，控制交换机的排队时延

构建统一模型表达队长(threshold) 

**1. 共享缓存的交换机需要的属性：（1）Isolation (2) Bounded drain time (3) Predictable Burst tolerance**

**2. 现有AQM和BM能满足吗？**  
>*While AQM can, in principle, guarantee bounded drain time to help with burst tolerance, AQM cannot fundamentally satisfy the isolation property due to its inability to control the shared buffer.*

>*BM schemes can, in principle, achieve isolation but are fundamentally limited in burst tolerance as a result of being oblivious to buffer drain time.*

**3. State-of-the-art: Dynamic Thresholds** 对DT展开了详细论述

### ABM

<img width="300" height="120" src="/img/post-abm-2.png"/>

Why it works?  
个人觉得作者应该是先提出的解决方案，在DT基础上将AQM和BM两部分结合起来，抓住了二者独立工作的本质不足，例如AQM不知道其他队列占缓存多少（$\frac{1}{n_p}$），而BM不知道队列排空速度（$\frac{u^{i}\_{p}}{b}$），这个思路思考起来还是挺直接的，然后加上的理论证明

### Discussion

对DC流量的优化：对unschedule的数据包（即第一个RTT）采用更高的$\alpha_{p}$

信息获取：drain rate采用定期测量的方式，考虑调度方式（例如4个queue，如果是round robin, C/4）

DT近似：可以在现有支持DT的交换机近似配置ABM


### Evaluation

**目前没有真实交换机实现，全部实验由仿真完成**

[代码](https://github.com/inet-tub/ns3-datacenter)

<img width="950" height="400" src="/img/post-abm-3.png"/>

文章一作也是[PowerTCP](https://yi-ran.github.io/2022/05/03/PowerTCP-NSDI-2022/)的作者，因此也进行了比较。

<img width="950" height="400" src="/img/post-abm-4.png"/>

<img width="450" height="450" src="/img/post-abm-5.png"/>


<img width="450" height="450" src="/img/post-abm-6.png"/>


### Thinking

优点：扎实理论模型与证明。

文章的前身应该是[FB](https://nsg.ee.ethz.ch/fileadmin/user_upload/publications/fb-submitted.pdf)（原先的一作是本文的二作）: 最开始的idea是针对DT的缺点做的方案，而ABM这篇文章可以看到，相比初始的版本，无论是从思想提炼还是理论证明均有了很大提升！理论方面相比初始版本，交换机缓存模型更加general，并且加上了瞬态下证明

### 参考文献

[ABM: Active Buffer Management in Datacenters](https://people.csail.mit.edu/ghobadi/papers/abm_sigcomm_2022.pdf)
